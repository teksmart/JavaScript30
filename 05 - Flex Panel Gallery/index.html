<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Flex Panels ðŸ’ª</title>
	<link href="https://fonts.googleapis.com/css?family=Amatic+SC" rel="stylesheet" type="text/css">
	<link href="style.css" rel="stylesheet">
</head>
<body>

<div class="panels">
	<div class="panel panel1">
		<p>Hey</p>
		<p>Let's</p>
		<p>Dance</p>
	</div>
	<div class="panel panel2">
		<p>Give</p>
		<p>Take</p>
		<p>Receive</p>
	</div>
	<div class="panel panel3">
		<p>Experience</p>
		<p>It</p>
		<p>Today</p>
	</div>
	<div class="panel panel4">
		<p>Give</p>
		<p>All</p>
		<p>You can</p>
	</div>
	<div class="panel panel5">
		<p>Life</p>
		<p>In</p>
		<p>Motion</p>
	</div>
</div>

<script>
	const panels = Array.from( document.querySelectorAll( '.panel' ) );

	panels.forEach( ( el ) => {
		el.addEventListener( 'click', handleClick );
		el.addEventListener( 'transitionend', handleTransition );
	} );

	function handleClick() {
		if ( this.classList.contains( 'open' ) ) {
			closePanel( this );

			return;
		}

		openPanel( this );
	}

	function openPanel( panel ) {
		panels.filter( ( el ) => ( el !== panel ) ).forEach( closePanel );

		panel.classList.add( 'open' );
	}

	function closePanel( panel ) {
		if ( panel.classList.contains( 'open' ) ) {
			panel.classList.add( 'closing' );
		}

		panel.classList.remove( 'open-active' );
	}

	function handleTransition( e ) {
		if ( this.classList.contains( 'closing' ) ) {
			if (
				( this.classList.contains( 'open' ) && e.propertyName.contains( 'flex' ) )
				|| 'transform' === e.propertyName
			) {
				this.classList.remove( 'open' );
				this.classList.remove( 'closing' );
			}

			return;
		}

		if ( this.classList.contains( 'open' ) && e.propertyName.contains( 'flex' ) ) {
			this.classList.add( 'open-active' );
		}
	}
</script>

</body>
</html>
